<?php

/**
 * <Comment>.
 *
 * @package shop
 * @subpakage class
 * @author Konstantin Shamiev aka ilosa <konstantin@shamiev.ru>
 * @date <Date>
 *
 * <BEG_CONFIG_PROPERTY>
 * <END_CONFIG_PROPERTY>
 */
class Shop_PresetContainerVPS extends Zero_Model
{
    protected $preset = [
        [
            'name' => 'Starter',
            'id' => 0,
            'hidden' => 0,
            'value' => '1/1/25',
            'PID' => 530,
            'summ' => 0,
            '0' => [
                '742' => [  'data' => ['0' => [ 'id' => 6261] ] ],
                '745' => [  'data' => ['0' => [ 'id' => 6270] ] ],
                '746' => [  'data' => ['0' => [ 'id' => 7975] ] ],
                '747' => [  'data' => ['0' => [ 'id' => 6283] ] ],
                '748' => [  'data' => ['0' => [ 'id' => 6289] ] ],
                '750' => [  'data' => ['0' => [ 'id' => 6297] ] ]
            ]
        ],
        [
            'name' => 'Basic',
            'id' => 0,
            'hidden' => 0,
            'value' => '2/2/50',
            'PID' => 530,
            'summ' => 0,
            '0' => [
                '742' => [ 'data' => [ '0' => [ 'id' => 6262] ] ],
                '745' => [ 'data' => [ '0' => [ 'id' => 6271] ] ],
                '746' => [ 'data' => [ '0' => [ 'id' => 6277] ] ],
                '747' => [ 'data' => [ '0' => [ 'id' => 6283] ] ],
                '748' => [ 'data' => [ '0' => [ 'id' => 6289] ] ],
                '750' => [ 'data' => [ '0' => [ 'id' => 6297] ] ]
            ]
        ],
        [
            'name' => 'Pro',
            'id' => 0,
            'hidden' => 0,
            'value' => '4/4/100',
            'PID' => 530,
            'summ' => 0,
            '0' => [
                '742' => [ 'data' => [ '0' => [ 'id' => 6263] ] ],
                '745' => [ 'data' => [ '0' => [ 'id' => 6272] ] ],
                '746' => [ 'data' => [ '0' => [ 'id' => 6278] ] ],
                '747' => [ 'data' => [ '0' => [ 'id' => 6283] ] ],
                '748' => [ 'data' => [ '0' => [ 'id' => 6289] ] ],
                '750' => [ 'data' => [ '0' => [ 'id' => 6297] ] ]
            ]
        ],
        [
            'name' => 'Advanced',
            'id' => 0,
            'hidden' => 0,
            'value' => '8/8/200',
            'PID' => 530,
            '0' => [
                '742' => [ 'data' => [ '0' => [ 'id' => 6265] ] ],
                '745' => [ 'data' => [ '0' => [ 'id' => 6273] ] ],
                '746' => [ 'data' => [ '0' => [ 'id' => 6279] ] ],
                '747' => [ 'data' => [ '0' => [ 'id' => 6283] ] ],
                '748' => [ 'data' => [ '0' => [ 'id' => 6289] ] ],
                '750' => [ 'data' => [ '0' => [ 'id' => 6297] ] ]
            ]
        ],
        [
            'name' => 'Pro',
            'id' => 0,
            'hidden' => 0,
            'value' => '8/8/200',
            'PID' => 530,
            'summ' => 0,
            '0' => [
                '742' => [ 'data' => [ '0' => [ 'id' => 6265] ] ],
                '745' => [ 'data' => [ '0' => [ 'id' => 6273] ] ],
                '746' => [ 'data' => [ '0' => [ 'id' => 6279] ] ],
                '747' => [ 'data' => [ '0' => [ 'id' => 6283] ] ],
                '748' => [ 'data' => [ '0' => [ 'id' => 6289] ] ],
                '750' => [ 'data' => [ '0' => [ 'id' => 6297] ] ]
            ]
        ],
        [
            'name' => 'Advanced',
            'id' => 0,
            'hidden' => 0,
            'value' => '8/8/200',
            'PID' => 530,
            'summ' => 0,
            '0' => [
                '742' => [ 'data' => [ '0' => [ 'id' => 6265] ] ],
                '745' => [ 'data' => [ '0' => [ 'id' => 6273] ] ],
                '746' => [ 'data' => [ '0' => [ 'id' => 6279] ] ],
                '747' => [ 'data' => [ '0' => [ 'id' => 6283] ] ],
                '748' => [ 'data' => [ '0' => [ 'id' => 6289] ] ],
                '750' => [ 'data' => [ '0' => [ 'id' => 6297] ] ]
            ]
        ],
        [
            'name' => 'NL Container VPS -1',
            'id' => 0,
            'hidden' => 0,
            'value' => '1/256/10',
            'PID' => 530,
            'summ' => 0,
            '0' => [
                '686' =>[ 'data' => [  '0' => [ 'id' => 5222] ] ],
                '689' =>[ 'data' => [  '0' => [ 'id' => 5228] ] ],
                '690' =>[ 'data' => [  '0' => [ 'id' => 5231] ] ],
                '691' =>[ 'data' => [  '0' => [ 'id' => 5233] ] ],
                '693' =>[ 'data' => [  '0' => [ 'id' => 5240] ] ],
                '695' =>[ 'data' => [  '0' => [ 'id' => 5249] ] ],
                '696' =>[ 'data' => [  '0' => [ 'id' => 5253] ] ],
            ]
        ],
        [
            'name' => 'NL Container VPS -2',
            'id' => 0,
            'hidden' => 0,
            'value' => '1/512/10',
            'PID' => 530,
            'summ' => 0,
            '0' => [
                '686' =>[ 'data' => [  '0' => [ 'id' => 5222] ] ],
                '689' =>[ 'data' => [  '0' => [ 'id' => 5229] ] ],
                '690' =>[ 'data' => [  '0' => [ 'id' => 5231] ] ],
                '691' =>[ 'data' => [  '0' => [ 'id' => 5233] ] ],
                '693' =>[ 'data' => [  '0' => [ 'id' => 5240] ] ],
                '695' =>[ 'data' => [  '0' => [ 'id' => 5249] ] ],
                '696' =>[ 'data' => [  '0' => [ 'id' => 5253] ] ]
            ]
        ],
        [
            'name' => 'NL Container VPS -3',
            'id' => 0,
            'hidden' => 0,
            'value' => '2/2/20',
            'PID' => 530,
            'summ' => 0,
            '0' => [
                '686' =>[ 'data' => [  '0' => [ 'id' => 5222] ] ],
                '689' =>[ 'data' => [  '0' => [ 'id' => 5230] ] ],
                '690' =>[ 'data' => [  '0' => [ 'id' => 5231] ] ],
                '691' =>[ 'data' => [  '0' => [ 'id' => 5233] ] ],
                '693' =>[ 'data' => [  '0' => [ 'id' => 5240] ] ],
                '695' =>[ 'data' => [  '0' => [ 'id' => 5249] ] ],
                '696' =>[ 'data' => [  '0' => [ 'id' => 5253] ] ],
        ]
        ],
        [
            'name' => 'NL Container VPS -4',
            'id' => 0,
            'hidden' => 0,
            'value' => '2/4/40',
            'PID' => 530,
            'summ' => 0,
            '0' => [
                '686' =>[ 'data' => [  '0' => [ 'id' => 5223] ] ],
                '689' =>[ 'data' => [  '0' => [ 'id' => 5259] ] ],
                '690' =>[ 'data' => [  '0' => [ 'id' => 5262] ] ],
                '691' =>[ 'data' => [  '0' => [ 'id' => 5233] ] ],
                '693' =>[ 'data' => [  '0' => [ 'id' => 5241] ] ],
                '695' =>[ 'data' => [  '0' => [ 'id' => 5249] ] ],
                '696' =>[ 'data' => [  '0' => [ 'id' => 5253] ] ],
            ]
        ],
        [
            'name' => 'NL Container VPS -5',
            'id' => 0,
            'hidden' => 0,
            'value' => '4/8/100',
            'PID' => 530,
            'summ' => 0,
            '0' => [
                '686' =>[ 'data' => [  '0' => [ 'id' => 5255] ] ],
                '689' =>[ 'data' => [  '0' => [ 'id' => 5260] ] ],
                '690' =>[ 'data' => [  '0' => [ 'id' => 5264] ] ],
                '691' =>[ 'data' => [  '0' => [ 'id' => 5233] ] ],
                '693' =>[ 'data' => [  '0' => [ 'id' => 5242] ] ],
                '695' =>[ 'data' => [  '0' => [ 'id' => 5249] ] ],
                '696' =>[ 'data' => [  '0' => [ 'id' => 5253] ] ],
            ]
        ],
        [
            'name' => 'NL Container VPS -5D',
            'id' => 0,
            'hidden' => 0,
            'value' => '4/8/100',
            'PID' => 530,
            'summ' => 0,
            '0' => [
                '686' =>[ 'data' => [  '0' => [ 'id' => 5255] ] ],
                '689' =>[ 'data' => [  '0' => [ 'id' => 5260] ] ],
                '690' =>[ 'data' => [  '0' => [ 'id' => 5264] ] ],
                '691' =>[ 'data' => [  '0' => [ 'id' => 5233] ] ],
                '693' =>[ 'data' => [  '0' => [ 'id' => 5242] ] ],
                '695' =>[ 'data' => [  '0' => [ 'id' => 5249] ] ],
                '696' =>[ 'data' => [  '0' => [ 'id' => 5253] ] ],
            ]
        ]
    ];


    public function getPreset( $container_VPS_custom = null, $billingcycle = 'monthly' ){
        if ( is_null( $container_VPS_custom ) ) {
            return $this->preset;
        } else {
            $a = array();
            foreach ( $this->preset as $k => $v ) {//level Preset{ name, id, value...}
                foreach ($v[0] as $key => $val )  {//level Options key = configoption
                    $ID = $val['data'][0]['id'];// id producta in Options
                    foreach ( $container_VPS_custom as $key_custom => $val_custom ) {//Level Options in custom
                        if( $key_custom == $key ) {// option = option
                            if (!isset( $a[$k] ) ) { $a[$k] = $this->preset[$k];}
                            foreach( $val_custom['data'] as $key_product => $val_product ) {
                                 if ( $val_product ['id'] == $ID )// ID product template = ID product custom merge array to template
                                     $a[$k][0][$key]['data'][0] = $val_product;
                                     $a[$k][0][$key]['name'] = $val_custom ['name'];
                            }
                        }
                    }
                }
            }
        }

        foreach ( $a as $k => $v ){
            foreach ( $v[0] as $key => $val )//Produts PID
            {
                $a[$k]['summ'] = $a[$k]['summ'] + $val['data'][0][$billingcycle];
            }
        }

        return $a;
    }

        /**
         * Фабрика по созданию объектов.
         *
         * @param integer $id идентификатор объекта
         * @param bool $flagLoad флаг полной загрузки объекта
         * @return Zero_Model_Pattern
         */
    public static function Make($id = 0, $flagLoad = false)
    {
        return new self($id, $flagLoad);
    }

}
